<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: CRobotContext.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CRobotContext.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CRobotContext_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#ifndef CROBOTCONTEXT_H</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#define CROBOTCONTEXT_H</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;ros/ros.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CEvent_8h.html">CEvent.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;RobotArmController/Move.h&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;RobotArmController/EmergencyStop.h&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;RobotArmController/ProgrammedPosition.h&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">class </span><a class="code" href="classIRobotStates.html">IRobotStates</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">class </span><a class="code" href="classCConfiguration.html">CConfiguration</a>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="classCRobotContext.html">   28</a></span>&#160;<span class="keyword">class </span><a class="code" href="classCRobotContext.html">CRobotContext</a></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classCRobotContext.html">CRobotContext</a>();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    ~<a class="code" href="classCRobotContext.html">CRobotContext</a>();</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#af50652269de0b3977920d97345ac3606">Run</a>();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#a34c126d70c235c1fdd60d028aea523d7">SetState</a>(std::shared_ptr&lt;IRobotStates&gt; sp_state);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#a0c691e094641e2e424dce4505a5db275">MoveCallback</a>(<span class="keyword">const</span> RobotArmController::Move::ConstPtr&amp; moveMsg);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#a64c5bcd86ffe2d1dff1354187f8e165b">CalibrateCallback</a>(<span class="keyword">const</span> RobotArmController::Move::ConstPtr&amp; calibrateMsg);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#ab4f5e962e8b722b8e844e41c64831ea9">EmergencyStopCallback</a>(<span class="keyword">const</span> RobotArmController::EmergencyStop::ConstPtr&amp; stopMsg);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCRobotContext.html#a9ab9301b43253d237984667c1b586cec">ProgrammedPositionCallback</a>(<span class="keyword">const</span> RobotArmController::ProgrammedPosition::ConstPtr&amp; programmedPositionMsg);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    std::chrono::duration&lt;double&gt; GetHighestDuration(<a class="code" href="classCEvent.html">CEvent</a>&amp; rEvent);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    std::shared_ptr&lt;IRobotStates&gt; m_spCurrentState;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    std::shared_ptr&lt;CConfiguration&gt; m_spConfiguration;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    ros::NodeHandle m_nodeHandle;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    ros::Subscriber m_moveSubcriber;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    ros::Subscriber m_calibrateSubscriber;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    ros::Subscriber m_emergencyStopSubcriber;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    ros::Subscriber m_programmedPositionSubcriber;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    std::queue&lt;CEvent&gt; m_preemptiveEventQueue;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    std::queue&lt;CEvent&gt; m_queuedEventQueue;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;};</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*CROBOTCONTEXT_H*/</span><span class="preprocessor"></span></div><div class="ttc" id="classCEvent_html"><div class="ttname"><a href="classCEvent.html">CEvent</a></div><div class="ttdef"><b>Definition:</b> CEvent.h:27</div></div>
<div class="ttc" id="classCRobotContext_html"><div class="ttname"><a href="classCRobotContext.html">CRobotContext</a></div><div class="ttdef"><b>Definition:</b> CRobotContext.h:28</div></div>
<div class="ttc" id="classCRobotContext_html_a64c5bcd86ffe2d1dff1354187f8e165b"><div class="ttname"><a href="classCRobotContext.html#a64c5bcd86ffe2d1dff1354187f8e165b">CRobotContext::CalibrateCallback</a></div><div class="ttdeci">void CalibrateCallback(const RobotArmController::Move::ConstPtr &amp;calibrateMsg)</div><div class="ttdoc">The callback function which will be called when a message gets posted on the /RobotArmController/Cali...</div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:91</div></div>
<div class="ttc" id="classCRobotContext_html_a0c691e094641e2e424dce4505a5db275"><div class="ttname"><a href="classCRobotContext.html#a0c691e094641e2e424dce4505a5db275">CRobotContext::MoveCallback</a></div><div class="ttdeci">void MoveCallback(const RobotArmController::Move::ConstPtr &amp;moveMsg)</div><div class="ttdoc">The callback function which will be called when a message gets posted on the /RobotArmController/Move...</div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:71</div></div>
<div class="ttc" id="classCRobotContext_html_a9ab9301b43253d237984667c1b586cec"><div class="ttname"><a href="classCRobotContext.html#a9ab9301b43253d237984667c1b586cec">CRobotContext::ProgrammedPositionCallback</a></div><div class="ttdeci">void ProgrammedPositionCallback(const RobotArmController::ProgrammedPosition::ConstPtr &amp;programmedPositionMsg)</div><div class="ttdoc">The callback function which will be called when a message gets posted on the /RobotArmController/Prog...</div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:118</div></div>
<div class="ttc" id="classCRobotContext_html_a34c126d70c235c1fdd60d028aea523d7"><div class="ttname"><a href="classCRobotContext.html#a34c126d70c235c1fdd60d028aea523d7">CRobotContext::SetState</a></div><div class="ttdeci">void SetState(std::shared_ptr&lt; IRobotStates &gt; sp_state)</div><div class="ttdoc">Sets the state of the Context, in doing so it goes through the exit action of the previous state...</div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:60</div></div>
<div class="ttc" id="classCRobotContext_html_ab4f5e962e8b722b8e844e41c64831ea9"><div class="ttname"><a href="classCRobotContext.html#ab4f5e962e8b722b8e844e41c64831ea9">CRobotContext::EmergencyStopCallback</a></div><div class="ttdeci">void EmergencyStopCallback(const RobotArmController::EmergencyStop::ConstPtr &amp;stopMsg)</div><div class="ttdoc">The callback function which will be called when a message gets posted on the /RobotArmController/Emer...</div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:109</div></div>
<div class="ttc" id="classCRobotContext_html_af50652269de0b3977920d97345ac3606"><div class="ttname"><a href="classCRobotContext.html#af50652269de0b3977920d97345ac3606">CRobotContext::Run</a></div><div class="ttdeci">void Run()</div><div class="ttdoc">The Run function runs the state machine so it handles all the events in its queue, afterwards it will stay waiting for new events to be created by functions to be called by ros. </div><div class="ttdef"><b>Definition:</b> CRobotContext.cpp:30</div></div>
<div class="ttc" id="CEvent_8h_html"><div class="ttname"><a href="CEvent_8h.html">CEvent.h</a></div><div class="ttdoc">The CEvent class is used as an event for the State machine, it holds instructions for servos and an e...</div></div>
<div class="ttc" id="classCConfiguration_html"><div class="ttname"><a href="classCConfiguration.html">CConfiguration</a></div><div class="ttdef"><b>Definition:</b> CConfiguration.h:42</div></div>
<div class="ttc" id="classIRobotStates_html"><div class="ttname"><a href="classIRobotStates.html">IRobotStates</a></div><div class="ttdef"><b>Definition:</b> IRobotStates.h:17</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
